<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demand Response Simulator - Grid Optimizer</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Navigation Header -->
        <nav class="nav-header">
            <div class="nav-content">
                <div class="nav-brand">
                    <div class="brand-icon">‚ö°</div>
                    <span class="brand-text">Grid Optimizer</span>
                </div>
                <div class="nav-status">
                    <div class="status-indicator" id="connectionStatus">
                        <div class="status-dot"></div>
                        <span>Connected</span>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title">Demand Response Simulator</h1>
                <p class="hero-subtitle">Optimize your electricity usage to save money and support the grid through intelligent demand management.</p>
            </div>
        </section>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Setup Phase -->
            <div id="setupPhase" class="phase-container">
                <div class="section-header">
                    <h2>Configure Your Energy Profile</h2>
                    <p>Set up your customer profile and demand response capabilities</p>
                </div>

                <div class="setup-grid">
                    <!-- Customer Profile Card -->
                    <div class="config-card">
                        <div class="card-header">
                            <h3>Customer Profile</h3>
                            <div class="card-icon">üè¢</div>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label class="form-label">Customer Type</label>
                                <select id="customerType" class="form-select">
                                    <option value="residential">üè† Residential</option>
                                    <option value="commercial">üè¢ Commercial</option>
                                    <option value="industrial">üè≠ Industrial</option>
                                    <option value="aggregator">üìä Aggregator</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Peak Demand: <span id="peakDemandValue" class="value-display">5</span> kW</label>
                                <input type="range" id="peakDemand" class="range-slider" min="2" max="5000" value="5">
                                <div class="range-labels">
                                    <span>Min</span>
                                    <span>Max</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Technologies Card -->
                    <div class="config-card">
                        <div class="card-header">
                            <h3>DR Technologies</h3>
                            <div class="card-icon">üîß</div>
                        </div>
                        <div class="card-body">
                            <div id="technologyOptions" class="tech-grid">
                                <!-- Dynamically filled by app.js -->
                            </div>
                        </div>
                    </div>

                    <!-- Rate Plan Card -->
                    <div class="config-card">
                        <div class="card-header">
                            <h3>Rate Plan</h3>
                            <div class="card-icon">üí∞</div>
                        </div>
                        <div class="card-body">
                            <div class="rate-options">
                                <label class="radio-card">
                                    <input type="radio" name="ratePlan" value="tou" checked>
                                    <div class="radio-content">
                                        <div class="radio-title">Time-of-Use (TOU)</div>
                                        <div class="radio-desc">Fixed rates by time period</div>
                                    </div>
                                </label>
                                <label class="radio-card">
                                    <input type="radio" name="ratePlan" value="cpp">
                                    <div class="radio-content">
                                        <div class="radio-title">Critical Peak Pricing (CPP)</div>
                                        <div class="radio-desc">High rates during peak events</div>
                                    </div>
                                </label>
                                <label class="radio-card">
                                    <input type="radio" name="ratePlan" value="rtp">
                                    <div class="radio-content">
                                        <div class="radio-title">Real-Time Pricing (RTP)</div>
                                        <div class="radio-desc">Dynamic hourly rates</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="action-section">
                    <button id="startSimulationBtn" class="btn-primary">
                        <span>Start Simulation</span>
                        <div class="btn-icon">‚ñ∂</div>
                    </button>
                </div>
            </div>

            <!-- Simulation Phase -->
            <div id="simulationPhase" class="phase-container" style="display:none;">
                <div class="simulation-header">
                    <div class="sim-info">
                        <h2>Live Simulation</h2>
                        <div class="day-counter">Day <span id="simDay">1</span></div>
                    </div>
                    <div class="time-display">
                        <div class="current-hour" id="currentHourDisplay">Hour 0</div>
                    </div>
                </div>

                <!-- Event Notification -->
                <div id="eventNotification" class="event-alert"></div>

                <!-- Charts Section -->
                <div class="charts-section">
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>Load Profile</h3>
                            <div class="chart-legend">
                                <div class="legend-item">
                                    <div class="legend-color" style="background: #21808d;"></div>
                                    <span>Base Load</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color" style="background: #c0152f;"></div>
                                    <span>Curtailment</span>
                                </div>
                            </div>
                        </div>
                        <canvas id="loadChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>Electricity Pricing</h3>
                            <div class="price-indicator" id="currentPriceIndicator">$0.00/kWh</div>
                        </div>
                        <canvas id="priceChart"></canvas>
                    </div>
                </div>

                <!-- Control Panel -->
                <div class="control-panel">
                    <div class="control-header">
                        <h3>Demand Response Controls</h3>
                        <div class="control-status">
                            <div class="status-badge" id="drStatus">Ready</div>
                        </div>
                    </div>
                    
                    <div class="control-grid">
                        <div class="control-section">
                            <label class="control-label">
                                Overall Curtailment: <span id="curtailmentValue" class="value-highlight">0</span>%
                            </label>
                            <input type="range" id="curtailmentSlider" class="range-slider primary" min="0" max="100" value="0">
                        </div>
                        
                        <div class="tech-controls" id="techCurtailmentControls">
                            <!-- Dynamically filled -->
                        </div>
                    </div>

                    <div class="action-controls">
                        <button id="nextHourBtn" class="btn-primary">
                            <span>Advance Hour</span>
                            <div class="btn-icon">‚è≠</div>
                        </button>
                        <button id="resetSimBtn" class="btn-secondary">
                            <span>Reset</span>
                            <div class="btn-icon">üîÑ</div>
                        </button>
                    </div>
                </div>

                <!-- Metrics Dashboard -->
                <div class="metrics-dashboard">
                    <div class="metrics-header">
                        <h3>Performance Metrics</h3>
                        <div class="metrics-period">Real-time</div>
                    </div>
                    
                    <div class="metrics-grid">
                        <div class="metric-card cost">
                            <div class="metric-icon">üíµ</div>
                            <div class="metric-content">
                                <div class="metric-label">Hour Cost</div>
                                <div class="metric-value">$<span id="hourCostValue">0.00</span></div>
                            </div>
                        </div>
                        
                        <div class="metric-card savings">
                            <div class="metric-icon">üí∞</div>
                            <div class="metric-content">
                                <div class="metric-label">Daily Savings</div>
                                <div class="metric-value">$<span id="dailySavingsValue">0.00</span></div>
                            </div>
                        </div>
                        
                        <div class="metric-card cumulative">
                            <div class="metric-icon">üìà</div>
                            <div class="metric-content">
                                <div class="metric-label">Total Savings</div>
                                <div class="metric-value">$<span id="cumulativeSavingsValue">0.00</span></div>
                            </div>
                        </div>
                        
                        <div class="metric-card grid">
                            <div class="metric-icon">‚ö°</div>
                            <div class="metric-content">
                                <div class="metric-label">Grid Impact</div>
                                <div class="metric-value" id="gridImpactValue">-</div>
                            </div>
                        </div>
                        
                        <div class="metric-card emissions">
                            <div class="metric-icon">üå±</div>
                            <div class="metric-content">
                                <div class="metric-label">CO‚ÇÇ Reduced</div>
                                <div class="metric-value"><span id="emissionsValue">0.00</span> kg</div>
                            </div>
                        </div>
                        
                        <div class="metric-card satisfaction">
                            <div class="metric-icon">üòä</div>
                            <div class="metric-content">
                                <div class="metric-label">Satisfaction</div>
                                <div class="metric-value" id="satisfactionValue">100%</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="achievements-section">
                        <h4>Achievements</h4>
                        <div class="achievements-list" id="achievementsList">
                            <div class="achievement-placeholder">Complete actions to unlock achievements</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <div class="footer-content">
                <p>&copy; 2025 Demand Response Simulator. Optimizing energy for a sustainable future.</p>
            </div>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>